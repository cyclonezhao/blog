<!DOCTYPE html><html><head><meta charset="utf-8" /><link rel="Shortcut Icon" href="favicon.ico" type="image/x-icon" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="Author"	content="Shenzhen Doocom Technology Co., Ltd. http://www.doocom.cn, Aug 2016" /><meta name="robots" content="index,follow,noodp,noydir" />    <link rel="stylesheet" href="bootstrap.min.css">    <link rel="stylesheet" href="font-awesome.4.6.0.css">    <link rel="stylesheet" href="build.css">    <link rel="stylesheet" href="style.css?time=1627103666717">    <script src="jquery.js"></script>    <script src="func.js"></script>    <script src="bootstrap.min.js"></script><title>入馆预约系统</title></head><body><div class="qrEvent_main">        <div class="qrCode_box">            <h3 class="title">深圳大学城图书馆</h3>            		 <h3 class="title">预约入馆</h3>            <p class="opt_time">                <span class="field">当前时间</span>                <span class="val nowTime" id="nowTime">                                    </span>                <span class="field">预约时间</span>                <span class="val" id="bookTime">                                                                                                                                                                                                       </span>                <span class="field">姓名</span>                <span class="val">                    <span>赵诣(序号：231)</span>                </span>            </p>            <div class="opt_res">                <p class="qr_show">                    <img src="images/qrcode.png" alt="" width="82%">                </p>            </div>        </div>        	        <div class="qrCode_verifyRes">	            <h3 class="title">核验成功，请点击签到</h3>              <p style="color: #888888;">未入馆请勿点击</p>	            <p class="opt_time">	                <span class="field">当前时间</span>	                <span class="val nowTime">2021/07/24 13:14</span>	            </p>	            <div class="opt_res">	                <p class="checkInBtn"><a href="javascript:void(0);" onclick="confirmBookingIn(this, '108800')">签到入馆</a></p>	            </div>	        </div>	        <div class="qrCode_checkeInRes">	            <h3 class="title">签到成功</h3>	            <p class="opt_time">	                <span class="field">当前时间</span>	                <span class="val nowTime">2021/07/24 13:14</span>	            </p>	            <div class="opt_res">	                <p class="res_tips">感谢您的配合，您现在可以关闭界面了。</p>	            </div>	        </div>            </div></body><script type="text/javascript" src="layer.js"></script><script type="text/javascript">  function dateFormat(fmt, date) {    let ret;    const opt = {        "Y+": date.getFullYear().toString(),        // 年        "m+": (date.getMonth() + 1).toString(),     // 月        "d+": date.getDate().toString(),            // 日        "H+": date.getHours().toString(),           // 时        "M+": date.getMinutes().toString(),         // 分        "S+": date.getSeconds().toString()          // 秒        // 有其他格式化字符需求可以继续添加，必须转化成字符串    };    for (let k in opt) {        ret = new RegExp("(" + k + ")").exec(fmt);        if (ret) {            fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))        };    };    return fmt;}  var timeStr = dateFormat("YYYY/mm/dd HH:MM", new Date());  $("#nowTime").text(timeStr);  var dateStr = dateFormat("YYYY/mm/dd", new Date());  $("#bookTime").text(dateStr + " 07:30-21:30");    $(function() {    	/* window.checkConfirmInterval = window.setInterval(function () {	    		    	if (!$('.qrCode_verifyRes').hasClass('isShow')) {	    		$.ajax({	                url:  '/member/booking-in/check-confirm/4536774f-8a18-45e1-b474-9fd588cae4d7_2121_951.ajax?t=' + new Date().getTime(), 	                type: 'post',	                data: {},	                dataType: 'json',	                beforeSend:function(xhr, settings)	                {	                },	                success: function(data){	                    if (data.error == 0 && data.status == 2) {                            $('.qrCode_box').hide();	                        $('.qrCode_verifyRes').hide();	                        $('.qrCode_verifyRes').addClass('isShow');	                        $('.qrCode_checkeInRes').show();	                    }	                },	                complete: function(XMLHttpRequest, textStatus) {	                    	                },error:function(data, status, xhr){	                   	                }	            });	    	}	    	                		showNowTime();        }, 1000); */    	    		        	            	    	    	    })            function confirmBookingIn(btnObj, id) {           var $btn = $(btnObj);                      if ($btn.hasClass('disabled-click')) {               return false;           }           $btn.addClass('disabled-click');           // $.ajax({           //     url:  '/member/booking-in/confirmStatus/'+ id +'.ajax?t=' + new Date().getTime(),            //     type: 'post',           //     data: {},           //     dataType: 'json',           //     beforeSend:function(xhr, settings)           //     {           //         /* index1 = layer.load(1, {           //           shade: [0.6,'#fff'] //0.1透明度的白色背景           //         }); */           //     },           //     success: function(data){                              //         if (data.error != 0) {           //             $btn.removeClass('disabled-click');           //         }                              //         if (data.error == 0) {           //      	   $('.qrCode_verifyRes').hide();           //             $('.qrCode_checkeInRes').show();           //         } else if(data.error == 54) {           //             showError(null, "很抱歉，您暂时无法取消预约。<br />如有问题请联系 ");           //         } else{           //             showError(null, "网络异常，请稍后重试！");           //         }           //     },           //     complete: function(XMLHttpRequest, textStatus) {                              //     },error:function(data, status, xhr){           //         $btn.removeClass('disabled-click');           //         showError(null, '网络异常，请稍后重试！');           //     }           // });                      return false;    }        function showError($input, errmsg, callFunc){        if($input){            $input.focus();        }        if(errmsg){            if($input){                var $errTips = $input.parent().next();                if ($errTips.size() == 0) {                    $input.parent().after('<span class="err_tips">'+ errmsg +'</span>');                    $input.parent().parent().addClass('error');                } else {                    $errTips.html(errmsg);                    $errTips.parent().addClass('error');                }            } else {                layer.alert('<div class="error">错误</div><div class="text">'+ errmsg +'</div>', {                    // icon: 1,                    shade: 0,                    skin: 'utszLayer',                    area: '200px;',                  }, function(){                    layer.closeAll();                    if (callFunc) {                        callFunc();                    }                  })            }        }    }        function showNowTime(){    	var now = new Date();    	var dateStr = now.getFullYear() + '/'     	   + (now.getMonth() < 9 ? ('0'+ (now.getMonth() + 1)) : (now.getMonth() + 1)) + '/'     	   + (now.getDate() < 10 ? ('0'+ now.getDate()) : now.getDate()) + ' '    	   + (now.getHours() < 10 ? ('0'+ now.getHours()) : now.getHours()) + ':'    	   + (now.getMinutes() < 10 ? ('0'+ now.getMinutes()) : now.getMinutes());    	    	$('.nowTime').html(dateStr);    	return dateStr;    }</script></html>